[gd_scene load_steps=29 format=3 uid="uid://4i6twcajef7o"]

[ext_resource type="Script" uid="uid://c6x0vlshg7kfq" path="res://systems/path_follow_2d/enemy_mover_2d.gd" id="1_opr3h"]
[ext_resource type="Script" uid="uid://5uy0prij3ijx" path="res://enemies/truck_01/enemy.gd" id="2_opr3h"]
[ext_resource type="Texture2D" uid="uid://cmm03kanojvf" path="res://enemies/truck_01/sprites/spaceship.png" id="2_we41i"]
[ext_resource type="Texture2D" uid="uid://cnjfe5o72rcve" path="res://enemies/truck_01/sprites/spaceship_n.png" id="3_rgy54"]
[ext_resource type="Script" uid="uid://dhptwklqja4wu" path="res://power_ups/power.gd" id="3_si0nv"]
[ext_resource type="Texture2D" uid="uid://pj7150qk3id3" path="res://enemies/truck_01/sprites/spaceship_s.png" id="4_3itgp"]
[ext_resource type="Script" uid="uid://8bx1so18egjq" path="res://power_ups/power_bounce.gd" id="4_576lq"]
[ext_resource type="Script" uid="uid://myosjs2vfvly" path="res://power_ups/power_chooser.gd" id="5_81pqk"]
[ext_resource type="Texture2D" uid="uid://c51g800bv4nh2" path="res://icon.svg" id="5_702ac"]
[ext_resource type="Texture2D" uid="uid://ud1y8kso1twb" path="res://enemies/truck_01/sprites/hp_bar.png" id="5_iuxom"]
[ext_resource type="AudioStream" uid="uid://cgog8n67653br" path="res://enemies/truck_01/explosion.wav" id="5_xft4a"]
[ext_resource type="Texture2D" uid="uid://dbtwt2yode478" path="res://enemies/truck_01/sprites/hp_bar_n.png" id="6_opr3h"]
[ext_resource type="Texture2D" uid="uid://dofojxaarv0ck" path="res://power_ups/power_down.png" id="6_qhn01"]
[ext_resource type="Script" uid="uid://dxigfhjtcdruc" path="res://systems/effects/one_shot_audio_player.gd" id="12_b8tc5"]
[ext_resource type="Texture2D" uid="uid://dgsbmjosxvuhx" path="res://assets/Red Effect Bullet Impact Explosion 32x32.png" id="12_sl7rh"]
[ext_resource type="Script" uid="uid://cn0y0ecxoqg62" path="res://systems/effects/one_shot_animated_sprite_2d.gd" id="13_si0nv"]

[sub_resource type="Resource" id="Resource_81pqk"]
script = ExtResource("4_576lq")
strenght = 5.0
time = 5.0
type = 0
spawn_chance = 1
sprite = ExtResource("5_702ac")
metadata/_custom_type_script = "uid://8bx1so18egjq"

[sub_resource type="Resource" id="Resource_702ac"]
script = ExtResource("4_576lq")
strenght = 0.1
time = 5.0
type = 1
spawn_chance = 1
sprite = ExtResource("6_qhn01")
metadata/_custom_type_script = "uid://8bx1so18egjq"

[sub_resource type="Resource" id="Resource_qhn01"]
script = ExtResource("5_81pqk")
powers = Array[ExtResource("3_si0nv")]([SubResource("Resource_81pqk"), SubResource("Resource_702ac")])
metadata/_custom_type_script = "uid://myosjs2vfvly"

[sub_resource type="CanvasTexture" id="CanvasTexture_iuxom"]
diffuse_texture = ExtResource("2_we41i")
normal_texture = ExtResource("3_rgy54")
specular_texture = ExtResource("4_3itgp")
specular_shininess = 0.6

[sub_resource type="CanvasTexture" id="CanvasTexture_h743x"]
diffuse_texture = ExtResource("5_iuxom")
normal_texture = ExtResource("6_opr3h")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2yru0"]
size = Vector2(32, 16)

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_b8tc5"]
random_pitch = 1.3
streams_count = 1
stream_0/stream = ExtResource("5_xft4a")

[sub_resource type="AtlasTexture" id="AtlasTexture_576lq"]
atlas = ExtResource("12_sl7rh")
region = Rect2(512, 384, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_81pqk"]
atlas = ExtResource("12_sl7rh")
region = Rect2(544, 384, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_702ac"]
atlas = ExtResource("12_sl7rh")
region = Rect2(576, 384, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_qhn01"]
atlas = ExtResource("12_sl7rh")
region = Rect2(608, 384, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_kf7hn"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_576lq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_81pqk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_702ac")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qhn01")
}],
"loop": false,
"name": &"default",
"speed": 5.0
}]

[node name="EnemyMover2D" type="PathFollow2D"]
loop = false
script = ExtResource("1_opr3h")
progression_speed = 50.0
metadata/_custom_type_script = "uid://c6x0vlshg7kfq"

[node name="Enemy" type="AnimatableBody2D" parent="." node_paths=PackedStringArray("explosion_audio_player", "explosion_sprite") groups=["enemies"]]
collision_layer = 32
collision_mask = 4
sync_to_physics = false
script = ExtResource("2_opr3h")
power_drop_chance = 80
power_chooser = SubResource("Resource_qhn01")
explosion_audio_player = NodePath("OneShotAudioPlayer")
explosion_sprite = NodePath("OneShotAnimatedSprite2D")
metadata/_custom_type_script = "uid://5uy0prij3ijx"

[node name="Sprite2D" type="Sprite2D" parent="Enemy"]
light_mask = 3
texture = SubResource("CanvasTexture_iuxom")

[node name="TextureProgressBar" type="TextureProgressBar" parent="Enemy"]
offset_left = -14.0
offset_top = -6.0
offset_right = 4.0
offset_bottom = 6.0
value = 100.0
nine_patch_stretch = true
stretch_margin_left = 9
stretch_margin_top = 6
stretch_margin_right = 9
stretch_margin_bottom = 6
texture_progress = SubResource("CanvasTexture_h743x")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Enemy"]
shape = SubResource("RectangleShape2D_2yru0")

[node name="OneShotAudioPlayer" type="AudioStreamPlayer" parent="Enemy"]
stream = SubResource("AudioStreamRandomizer_b8tc5")
script = ExtResource("12_b8tc5")
metadata/_custom_type_script = "uid://dxigfhjtcdruc"

[node name="OneShotAnimatedSprite2D" type="AnimatedSprite2D" parent="Enemy"]
visible = false
z_index = 10
sprite_frames = SubResource("SpriteFrames_kf7hn")
script = ExtResource("13_si0nv")
metadata/_custom_type_script = "uid://cn0y0ecxoqg62"
